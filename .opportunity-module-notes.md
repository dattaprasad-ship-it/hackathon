# Opportunity Module - Working Notes
**Status**: Collecting Information
**Last Updated**: [Will update as we progress]

## General Rules

**Required Fields:**
- Fields marked with asterisk (*) are REQUIRED fields
- Required fields must be filled before forms can be saved
- Visual indicator: Asterisk (*) displayed next to field label

**Dropdown Fields:**
- All dropdown fields MUST have populated values/options available for selection
- Dropdown values should be pre-loaded from the system/database
- Users must be able to select from available options in dropdowns

---

## 1. Dashboard View (Post-Login)

### Context
- This dashboard is displayed after user login
- URL: `suite8demo.suiteondemand.com/#/home`
- Dashboard shows user-centric widgets and module navigation

### Navigation Structure
- **Top Navigation Bar**: Contains module links
  - Opportunities module is prominently displayed in main navigation
  - Opportunities dropdown menu (opens on hover/click) contains:
    1. "Create Opportunity" - Quick action to create new opportunity
    2. "View Opportunities" - Navigate to opportunities list view
    3. "Import Opportunities" - Bulk import functionality
    4. "Recently Viewed" - Shows recently accessed opportunities (has right arrow indicating sub-menu)
  - Other visible modules: Accounts, Contacts, Leads, Quotes, Calendar, Documents, More

### Dashboard Widgets (Relevant to Opportunities)
- **My Activity Stream**: Shows activity feed including lead conversions (e.g., "Will Westin converted a lead test test")
  - Suggests lead-to-opportunity conversion workflow exists
  - Activity timestamp shown (e.g., "0 Hours 24 Minutes ago")
  - Actions: Reply, Delete available on activities
  - Pagination present (<< < (1-2 of 2) > >>)

- **My Leads Widget**: 
  - Table with columns: Name, Job Title, Office Phone, Email Address
  - Row actions: Edit (pencil icon), View (eye icon)
  - Pagination: << < (1-5 of 34) > >>
  - Sortable columns (arrows on headers)

### UI Patterns Observed
- Widget-based dashboard layout
- Widget controls: Gear icon (settings), X icon (close)
- Table views with pagination, sorting
- Row-level actions (Edit, View icons)
- Activity tracking with timestamps

### Open Questions
1. What are the detailed behaviors when clicking each dropdown option (Create, View, Import, Recently Viewed)?
2. What is the exact relationship/flow between Leads and Opportunities?
3. Are there Opportunity-specific widgets on the dashboard?
4. What options are available in the "Recently Viewed" sub-menu?

---

## 2. Opportunities Navigation Menu

### Dropdown Menu Options
When hovering/clicking on "Opportunities" in the top navigation, the following options are displayed:

1. **Create Opportunity**
   - Quick action to create a new opportunity
   - Purpose: Fast access to opportunity creation form

2. **View Opportunities**
   - **Functionality**: Navigates to the Opportunities list/view page
   - **Navigation**: Redirects to `/opportunities/index` (Opportunities list view)
   - **Purpose**: Access the main opportunities listing page
   - **Behavior**: Clicking this option takes user to the same page as clicking directly on "Opportunities" tab in navigation

3. **Import Opportunities**
   - Bulk import functionality for opportunities
   - Purpose: Import multiple opportunities via file upload

4. **Recently Viewed**
   - Shows recently accessed opportunities
   - Has right arrow indicator (→) indicating a sub-menu with list of recent items
   - **Behavior**: 
     - Clicking opens a sub-menu/list showing recently viewed opportunities
     - Displays list of opportunity names (e.g., "Kaos Trading Ltd...", "Trading Ltd")
     - Shows truncated names if they are long (indicated by "...")
   - **Purpose**: Quick access to recently worked-on opportunities
   - **Usage**: User can quickly navigate to recently viewed opportunity records without searching or browsing the full list

### Open Questions
1. ~~What happens when clicking "Create Opportunity" - form fields, validation rules, etc.?~~ [ANSWERED in Section 7 - Create Opportunity Page]
2. ~~What does the "View Opportunities" page look like - table structure, filters, columns?~~ [ANSWERED in Section 3]
3. What file formats are supported for "Import Opportunities" (CSV, Excel, etc.)?
4. ~~What does the "Recently Viewed" sub-menu display - list format, limit of items?~~ [ANSWERED - Shows list of recently viewed opportunity names, truncated if long, clickable to navigate]
5. Are there any role-based restrictions on these menu options?
6. What is the maximum number of items shown in "Recently Viewed" sub-menu?
7. How is the recency determined for "Recently Viewed" (time-based, session-based, etc.)?
8. What happens when clicking on an opportunity name in the "Recently Viewed" sub-menu - does it navigate to detail page?

---

## 3. Opportunities List View

### Context
- This is the main opportunities listing page
- URL: `suite8demo.suiteondemand.com/#/opportunities`
- Accessed when clicking directly on "Opportunities" tab in navigation
- Two-panel layout: List view (left) and Quick Charts (right)

### Page Layout

#### Left Panel: Opportunities List

**Header:**
- Title: "OPPORTUNITIES"
- "Opportunities" is highlighted in top navigation bar

**Action Bar (Top of List):**
- **Select All Checkbox**: Selects all visible opportunities on current page
  - When opportunities are selected, displays count: "Selected: [number]" (e.g., "Selected: 119")
- **Bulk Action Dropdown**: 
  - **State**: Disabled by default, becomes enabled when one or more opportunities are selected
  - **Trigger**: Enabled when user selects opportunities via checkboxes or uses "Select All"
  - **Options Available (when enabled)**:
    1. **Delete**: Remove selected opportunities
    2. **Export**: Export selected opportunities' data
    3. **Merge**: Combine selected opportunities into one
    4. **Mass Update**: Apply bulk changes to selected opportunities
- **Columns Icon**: Located to the right of Bulk Action dropdown - opens "Choose Columns" modal to customize visible columns
- **List View Toggle**: Button to switch between different view formats (currently showing detailed list icon)
- **Pagination**: Displays "(1 - 20 of 119)" with navigation controls:
  - First page: "<<"
  - Previous page: "<"
  - Next page: ">"
  - Last page: ">>"

**Filter and Insights Buttons:**
- Located above the list area (top right of the page)
- "Filter" button: Opens Basic Filter panel for refining list data (becomes highlighted when active)
- **"Insights" Button Behavior**:
  - **Default State**: Insights panel displays by default when navigating to the Opportunities page
  - **On Click**: When "Insights" button is clicked:
    - Quick Charts panel is hidden/collapsed
    - Table columns expand to use the full width (right panel space becomes available)
    - Allows more horizontal space for viewing opportunity data
  - **Toggle Behavior**: Clicking again should restore Quick Charts panel (presumed behavior)

**Opportunities Table:**
Table with the following sortable columns (in order):

1. **Checkbox Column**
   - For selecting individual opportunity rows
   - When checked, enables Bulk Action dropdown
   - Selection state contributes to the "Selected: [count]" display in action bar

2. **Context Menu Column**
   - Three vertical dots icon (⋮)
   - Row-specific actions menu

3. **Name Column**
   - Opportunity name (hyperlink/clickable)
   - Format example: "Kaos Trading Ltd - 500 units"
   - Sortable
   - **Click Behavior**: Clicking the name opens the Opportunity Detail/Edit page

4. **Account Name Column**
   - Associated account name
   - Example: "Kaos Trading Ltd"
   - Sortable

5. **Sales Stage Column**
   - Current stage of the opportunity
   - Sortable
   - **Observed Sales Stages:**
     - Qualification
     - Proposal/Price Quote
     - Closed Won
     - Perception Analysis
     - Value Proposition
     - Closed Lost
     - Identifying Decision Makers
     - Prospecting
     - Negotiation/Review
     - Needs Analysis (visible in chart legend)

6. **Amount Column**
   - Monetary value of the opportunity
   - Format: Currency format (e.g., "$5,000.00", "$75,000.00", "$100,000.00")
   - Sortable

7. **Close Column**
   - Projected close date
   - Format: Date format (e.g., "2026-01-07", "2025-11-29")
   - Sortable

8. **User Column**
   - Assigned user name
   - Examples: "Max Jensen", "Sally Bronsen", "Sarah Smith", "Chris Olliver", "Will Westin"
   - Sortable

9. **Row Actions (Icon Group)**
   - **Phone Icon**: Quick call action
   - **Calendar Icon**: Schedule meeting/event
   - **Equals Sign Icon (=)**: Task/note action
   - **Email Icon (Envelope)**: Send email
   - **Right Chevron Icon (→)**: View opportunity details (opens Opportunity Detail/Edit page)

**Table Features:**
- All column headers are sortable (sort arrows visible on all columns)
- **Column Sorting Behavior (Three-State Cycle)**:
  1. **First Click**: Sorts in **Descending** order (highest to lowest, Z to A)
     - Sort icon is highlighted to indicate descending sort is active
  2. **Second Click**: Sorts in **Ascending** order (lowest to highest, A to Z)
     - Sort icon is highlighted to indicate ascending sort is active
  3. **Third Click**: Returns to **Normal/Default** order (original unsorted state)
     - Sort icon is not highlighted
- Sort state is visually indicated by highlighted sort icon next to the column header
- Sort applies to the entire dataset, not just the current page
- Multiple opportunities displayed per page (20 per page, total 119 opportunities)
- Each row shows full opportunity details
- Some name, account name, and user fields are hyperlinked (displayed in red text)
- Column visibility can be customized via "Choose Columns" modal (triggered by columns icon)

#### Right Panel: Quick Charts

**Visibility:**
- Displayed by default when navigating to Opportunities page
- Can be hidden by clicking the "Insights" button
- When hidden, table columns expand to use full width

**Header:**
- Title: "Quick Charts"

**Chart Selector:**
- Dropdown menu currently showing "Pipeline By Sales Stage"
- Suggests multiple chart types available

**Chart Display:**
- **Chart Type**: Vertical bar chart
- **Chart Title**: "Pipeline By Sales Stage"
- **Y-Axis**: Monetary amounts, scaled from "$0.00" to "$1,500,000.00"
- **Bars**: Multiple colored bars representing different sales stages
  - Bar height corresponds to total monetary amount in that stage
  - Tallest bar reaches close to $1,500,000.00

**Chart Legend:**
Maps colors to Sales Stage categories:
- Value Proposition (yellow)
- Qualification (green)
- Prospecting (orange)
- Proposal/Price Quote (brown/reddish)
- Perception Analysis (red)
- Negotiation/Review (light blue)
- Needs Analysis (dark blue)
- Identifying Decision Makers (dark red/maroon)
- Additional legend items partially visible/cut off

### Bulk Actions Details

**Bulk Action Dropdown Functionality:**
- **Enabled State**: Activated when one or more opportunities are selected
- **Options**:
  1. **Delete**: Removes selected opportunities from the system
  2. **Export**: Exports data for selected opportunities (file format to be determined)
  3. **Merge**: Combines multiple selected opportunities into a single opportunity
  4. **Mass Update**: Allows updating common fields across selected opportunities simultaneously

### Open Questions
1. What happens when clicking "Delete" - is there a confirmation dialog?
2. What file format(s) does "Export" support (CSV, Excel, PDF)?
3. How does "Merge" work - which opportunity's data is retained, how are conflicts resolved?
4. What fields can be updated via "Mass Update" - are all fields available or only specific ones?
5. What other chart types are available in the "Pipeline By Sales Stage" dropdown?
6. ~~What filtering options are available in the "Filter" button?~~ [ANSWERED in Section 5]
7. ~~What insights are shown in the "Insights" button?~~ [ANSWERED - Insights panel displays by default, clicking hides Quick Charts and expands columns]
8. ~~What happens when clicking an opportunity name or chevron icon?~~ [ANSWERED in Section 6 - Opens Opportunity Detail/Edit page]
8. What happens when clicking the context menu (three dots) on a row?
9. What are the exact behaviors of row action icons (phone, calendar, email, chevron)?
10. What are all possible Sales Stage values (complete list)?
11. How does the list view toggle work - what other view formats are available?
12. What is the maximum number of opportunities displayed per page (is 20 configurable)?
13. Are there any advanced search capabilities beyond basic filtering?

---

## 4. Choose Columns Modal

### Context
- Modal window that opens when clicking the "Columns Icon" (located to the right of Bulk Action dropdown in the Opportunities list view action bar)
- Allows users to customize which columns are visible/hidden in the Opportunities table
- Overlays the main Opportunities list view

### UI Elements

**Modal Header:**
- **Title**: "Choose Columns"
- **Close Button**: 'X' icon in the top right corner to dismiss the modal

**Modal Body - Two Column Layout:**

1. **DISPLAYED Section (Left Panel)**
   - Header: "DISPLAYED"
   - Lists columns currently visible in the Opportunities table
   - Columns shown as purple tags/badges
   - **Current Displayed Columns** (default visible):
     - Name
     - Account Name
     - Sales Stage
     - Amount
     - Close
     - User
     - Date Created

2. **HIDDEN Section (Right Panel)**
   - Header: "HIDDEN"
   - Lists columns currently not visible in the Opportunities table
   - Columns shown as red tags/badges
   - **Current Hidden Columns** (available but not shown):
     - Type
     - Lead Source
     - Next Step
     - Probability (%)
     - Created By
     - Modified By

**Modal Footer - Action Buttons:**
- **Close Button** (Grey): Dismisses the modal without saving any changes
- **Save Changes Button** (Dark Grey/Blue): Applies the selected column configuration to the Opportunities list view and closes the modal

### Functionality
- Users can customize which columns appear in the Opportunities table
- Columns can be moved between DISPLAYED and HIDDEN sections
- Changes are applied when "Save Changes" is clicked
- Closing without saving discards any changes

### Additional Column Options Discovered
The modal reveals additional columns available for the Opportunities table:
- **Type**: Opportunity type classification
- **Lead Source**: Source of the lead that became the opportunity
- **Next Step**: Next action/step in the sales process
- **Probability (%)**: Win probability percentage
- **Date Created**: Creation timestamp
- **Created By**: User who created the opportunity
- **Modified By**: User who last modified the opportunity

### Open Questions
1. How are columns moved between 'DISPLAYED' and 'HIDDEN' sections (click, drag-and-drop, arrows)?
2. Is it possible to reorder the columns within the 'DISPLAYED' section?
3. Are there any default columns that cannot be hidden (required columns)?
4. What is the maximum number of columns that can be displayed simultaneously?
5. What happens if a user attempts to save with no columns selected for display (edge case)?
6. Are column preferences saved per user or globally?
7. Do column customizations persist across browser sessions?

---

## 5. Basic Filter Panel

### Context
- Opens when clicking the "Filter" button (located top right of the Opportunities list page)
- Provides advanced filtering capabilities for the opportunities list
- Filter button becomes highlighted/active when the panel is open
- Panel can be collapsed/closed using the 'X' icon in the header

### Panel Structure

**Panel Header:**
- **Title**: "Basic Filter"
- **Close/Collapse Button**: 'X' icon on the left side of the header

### Filter Fields (Grid Layout)

The filter panel contains the following input fields arranged in a grid:

1. **Opportunity Name**
   - **Type**: Text input field
   - **Purpose**: Filter opportunities by name (partial match likely supported)
   - **Placeholder**: Empty text field

2. **Account Name**
   - **Type**: Dropdown selector
   - **Purpose**: Filter by associated account
   - **Placeholder**: "Select an item"
   - **Behavior**: Dropdown populated with available accounts

3. **Opportunity Amount**
   - **Type**: Dropdown (operator) + Text input (value)
   - **Purpose**: Filter by monetary amount
   - **Operator Dropdown**: Currently shows "Equals" (other operators likely available)
   - **Value Input**: Text field for entering amount
   - **Potential Operators**: Equals, Greater Than, Less Than, Between, etc. (to be confirmed)

4. **Assigned to**
   - **Type**: Dropdown selector
   - **Purpose**: Filter by assigned user
   - **Placeholder**: "Select an item"
   - **Behavior**: Dropdown populated with available users

5. **Sales Stage**
   - **Type**: Dropdown selector
   - **Purpose**: Filter by sales stage
   - **Placeholder**: "Select an item"
   - **Behavior**: Dropdown populated with sales stage values

6. **Lead Source**
   - **Type**: Dropdown selector
   - **Purpose**: Filter by the source of the lead
   - **Placeholder**: "Select an item"
   - **Behavior**: Dropdown populated with lead source options

7. **Expected Close Date**
   - **Type**: Dropdown (operator) + Date input (value)
   - **Purpose**: Filter by close date
   - **Operator Dropdown**: Currently shows "Equals" (other operators likely available)
   - **Date Input**: Date picker field with format "yyyy-mm-dd" and calendar icon
   - **Potential Operators**: Equals, Before, After, Between, etc. (to be confirmed)

8. **Next Step**
   - **Type**: Text input field
   - **Purpose**: Filter by next step text
   - **Placeholder**: Empty text field

### Quick Filter Checkboxes

Located below the filter fields, these checkboxes provide quick filtering options:

1. **My Items**
   - Filters to show only opportunities assigned to the current user

2. **Open Items**
   - Filters to show only open/non-closed opportunities (excludes Closed Won, Closed Lost)

3. **My Favorites**
   - Filters to show only favorited opportunities (if favorites feature exists)

### Filter Action Buttons

Located at the bottom right of the filter panel:

1. **Clear Button** (Red outline)
   - **Purpose**: Resets all filter criteria to empty/default state
   - **Action**: Clears all input fields and checkboxes

2. **Search Button** (Red filled)
   - **Purpose**: Applies the selected filter criteria to the opportunities list
   - **Action**: Filters the table based on entered criteria and closes/collapses the filter panel

3. **Save Button** (Red outline)
   - **Purpose**: Saves the current filter configuration
   - **Action**: Saves filter for future use (may prompt for filter name)

### Quick Filter and Order Section

Located below the Basic Filter panel:

1. **Name Quick Filter**
   - **Type**: Text input field
   - **Purpose**: Quick search/filter by name column
   - **Quick Filter Checkbox**: Checkbox next to the input, enables/disables quick filter functionality

2. **Order by Column**
   - **Type**: Dropdown selector
   - **Purpose**: Select column to sort by (alternative to clicking column headers)
   - **Behavior**: Dropdown populated with available table columns
   - **Note**: This provides an alternative sorting method, separate from clicking column headers

3. **Sort Direction**
   - **Type**: Radio buttons
   - **Options**: 
     - "Ascending" (A-Z, low to high)
     - "Descending" (Z-A, high to low)
   - **Purpose**: Select sort order for the selected column when using "Order by Column" dropdown
   - **Note**: When using column header clicks, the three-state cycle applies (Descending → Ascending → Normal)

### Filter Behavior
- Filter panel expands/collapses when Filter button is clicked
- Multiple filter criteria can be combined (AND logic likely)
- Filter state persists until cleared or changed
- Saved filters can be reused (via Save button)

### Open Questions
1. What are all available comparison operators for "Opportunity Amount" and "Expected Close Date" dropdowns (Greater Than, Less Than, Between, Contains, etc.)?
2. Are the dropdown values (Account Name, Assigned to, Sales Stage, Lead Source) dynamically populated from the database?
3. Does the "Save" button prompt for a filter name, or save with a default name?
4. How are saved filters accessed and applied (is there a "Saved Filters" dropdown)?
5. What is the exact functionality of the "Quick Filter" checkbox next to the Name field?
6. Can multiple filter criteria be combined with OR logic, or only AND logic?
7. Is there a maximum number of saved filters per user?
8. What columns are available in the "Order by column" dropdown?
9. Can filters be shared between users or are they user-specific?
10. What happens when a filter returns zero results - is there a specific message displayed?

---

## 6. Opportunity Detail/Edit Page

### Context
- Accessed by clicking on an opportunity name in the Opportunities list view
- Displays detailed information for a specific opportunity
- Allows viewing and editing opportunity details
- Example: Clicking "Kaos Trading Ltd - 500 units" opens its detail page
- URL pattern: `suite8demo.suiteondemand.com/#/opportunities/[opportunity-id]` (presumed)

### Page Layout

#### Main Content Area (Left Panel)

**Page Header:**
- Opportunity name displayed prominently (e.g., "Kaos Trading Ltd - 500 units")
- **Star Icon**: Favorite/unfavorite the opportunity
- **Navigation Arrows**: `<` and `>` with record position indicator (e.g., "1 of 118")
  - Allows navigating between opportunity records without returning to list
- **Action Buttons** (right side of header):
  - **View Mode Buttons**:
    1. **Edit**: Opens/activates edit mode
    2. **Insights**: Toggles Insights panel (currently highlighted when active)
    3. **Actions**: Dropdown menu with additional actions (Delete, Duplicate, etc.)
  - **Edit Mode Buttons** (replaces View Mode buttons when Edit is clicked):
    1. **Save**: Saves changes and returns to view mode
    2. **Save And Continue**: Saves changes and remains in edit mode
    3. **Cancel**: Discards changes and returns to view mode
    4. **Insights**: Toggles Insights panel (remains available in edit mode)
    5. **Actions**: Dropdown menu (remains available in edit mode)

**Tabs:**
Two main tabs organize the opportunity data:

1. **BASIC Tab** (Default/Active)
   - Contains all editable opportunity fields
   - **View Mode**: Fields displayed as read-only with pencil icons indicating editable capability
   - **Edit Mode**: Fields become active input controls (when "Edit" button in header is clicked)
   - **Fields** (in order displayed):
     - **OPPORTUNITY NAME**: 
       - **Type**: Text input (required field)
       - **View**: Displayed as text with pencil icon
       - **Edit**: Text input field, pre-filled with current value (e.g., "Kaos Trading Ltd - 500 units")
     - **OPPORTUNITY AMOUNT**: 
       - **Type**: Currency input with currency selector (required field)
       - **View**: Displayed as formatted currency (e.g., "$5,000.00")
       - **Edit**: Two-part input:
         - Currency dropdown: Shows currency symbol/abbreviation (e.g., "$ (USD)")
         - Amount text input: Numeric input field (e.g., "5,000.00")
     - **SALES STAGE**: 
       - **Type**: Dropdown selector (required field, marked with *)
       - **View**: Displayed as selected value (e.g., "Negotiation/Review")
       - **Edit**: Dropdown with current selection visible, click to see all options
       - **Dropdown Values**: MUST be populated with available sales stage options
     - **PROBABILITY (%)**: 
       - **Type**: Numeric input
       - **View**: Displayed as percentage value (e.g., "80")
       - **Edit**: Numeric text input field
     - **NEXT STEP**: 
       - **Type**: Text input (optional)
       - **View**: Displays value if present, or empty field
       - **Edit**: Text input field (can be empty)
     - **DESCRIPTION**: 
       - **Type**: Multiline text area (optional)
       - **View**: Displays description text if present, or empty field
       - **Edit**: Text area (multiline) for longer descriptions
     - **ASSIGNED TO**: 
       - **Type**: User lookup/dropdown field
       - **View**: Hyperlinked text (displayed in red, e.g., "Max Jensen") - clicking opens user selector or navigates
       - **Edit**: Dropdown field showing current selection (e.g., "Max Jensen")
         - 'X' icon to clear selection
         - Downward chevron to open dropdown and select user
         - **Dropdown Values**: MUST be populated with available users
         - **Dropdown Values**: MUST be populated with available users
     - **ACCOUNT NAME**: 
       - **Type**: Account lookup field (required field, marked with *)
       - **View**: Hyperlinked text (displayed in red, e.g., "Kaos Trading Ltd") - clicking navigates to account
       - **Edit**: Text input field (lookup/autocomplete) pre-filled with current value (e.g., "Kaos Trading Ltd")
         - 'X' icon to clear selection
         - Likely supports autocomplete/search functionality
         - **Dropdown Values**: MUST be populated with available accounts
     - **EXPECTED CLOSE DATE**: 
       - **Type**: Date picker (required field)
       - **View**: Displayed as formatted date (e.g., "2026-01-07")
       - **Edit**: Date input field with calendar icon
         - Format: "yyyy-mm-dd"
         - Calendar icon opens date picker calendar
     - **TYPE**: 
       - **Type**: Dropdown selector (optional)
       - **View**: Displays selected type or empty
       - **Edit**: Dropdown field (can be empty, shows "Select an item" when empty)
     - **LEAD SOURCE**: 
       - **Type**: Dropdown selector (optional)
       - **View**: Displays selected source (e.g., "Word of mouth")
       - **Edit**: Dropdown field showing current selection, click to see all options
     - **CAMPAIGN**: 
       - **Type**: Campaign lookup/dropdown field (optional)
       - **View**: Displays selected campaign or empty
       - **Edit**: Dropdown field showing "Select an item" when empty, or current campaign when selected
         - 'X' icon to clear selection
         - Downward chevron to open dropdown

2. **OTHER Tab**
   - Contains metadata and audit information (read-only fields)
   - **View Mode**: Displays read-only metadata fields
   - **Edit Option**: Contains an "Edit" button/link to edit opportunity (may activate edit mode for BASIC tab or open additional edit options)
   - **Fields** (read-only, system-generated):
     - **DATE MODIFIED**: 
       - **Type**: Read-only timestamp field
       - **Display**: Shows last modification date and time (e.g., "2025-12-12 17:00")
       - **Format**: Date and time format (yyyy-mm-dd HH:mm)
       - **Purpose**: Audit trail showing when opportunity was last updated
     - **DATE CREATED**: 
       - **Type**: Read-only timestamp field
       - **Display**: Shows creation date and time (e.g., "2025-12-09 12:45")
       - **Format**: Date and time format (yyyy-mm-dd HH:mm)
       - **Purpose**: Audit trail showing when opportunity was first created
   - **Edit Button**: 
     - Located in OTHER tab
     - Clicking activates edit mode (same as clicking "Edit" in page header)
     - Allows editing opportunity fields from the OTHER tab context

**Relationships Section:**
- **Header**: "Relationships" with an expand/collapse chevron icon (upward-pointing when collapsed, downward when expanded)
- **Collapsed State** (Default): Shows section header only
- **Expanded State** (when chevron clicked): Displays a grid of related entities with icons and counts
  - Each relationship type shows:
    - Entity icon
    - Entity name (label)
    - Count of related records (e.g., "3", "0")
  - **Related Entity Types** (visible when expanded):
    1. **ACTIVITIES**: Count of related activities (chart icon)
    2. **HISTORY**: Count of historical records (clock icon)
    3. **DOCUMENTS**: Count of related documents (document icon)
    4. **LEADS**: Count of related leads (star/sparkle icon)
    5. **PROJECTS**: Count of related projects (pie chart icon)
    6. **QUOTES**: Count of related quotes (pound sterling/currency icon)
    7. **CONTACTS**: Count of related contacts (person icon, e.g., "3")
    8. **CONTRACTS**: Count of related contracts (signature/contract icon)
    9. **SECURITY GROUPS**: Count of related security groups (padlock icon)
  - **Click Behavior**: Clicking on a relationship item (e.g., "ACTIVITIES: 1", "CONTACTS: 3") opens a sub-panel below the Relationships section for that specific relationship type

**Relationship Sub-panels:**

When a relationship item is clicked, a sub-panel opens below the Relationships section displaying records for that relationship type.

**Sub-panel Structure (Common to All Relationship Types):**
- **Panel Header**:
  - **Title**: Name of the relationship type (e.g., "Activities", "Contacts", "Documents")
  - **Close Button**: 'X' icon on the left side of the header to close/collapse the sub-panel
  - **Actions Dropdown**: Button on the right side of the header for relationship-specific actions
    - Options vary by relationship type:
      - **ACTIVITIES**: Options like "Schedule Call", "Schedule Meeting", "Create Task", "Log Call", etc.
      - **CONTACTS**: Options like "Create Contact", "Link Existing Contact", etc.
      - **DOCUMENTS**: Options like "Upload Document", "Link Document", etc.
      - **QUOTES**: Options like "Create Quote", etc.
      - Other relationship types have their own specific create/link options

- **Content Display**:
  - **When Records Exist**: Displays a table/list of related records with appropriate columns for that entity type
  - **When No Records**: Displays "No results found." or similar empty state message
  - **Table Features**:
    - Sortable columns (indicated by up/down arrows)
    - Row actions (Edit, View, Delete icons) for each record
    - Pagination controls (if multiple pages of records exist)
    - Select checkboxes for bulk operations (if applicable)

**Example: Activities Sub-panel:**

When clicking on "ACTIVITIES" in the Relationships section:

- **Panel Header**:
  - Title: "Activities"
  - Close 'X' button
  - Actions dropdown with options like:
    - "Schedule Call"
    - "Schedule Meeting"
    - "Create Task"
    - "Log Call"
    - "Send Email"
    - Other activity-related actions

- **Table Columns** (when records exist):
  1. **Subject**: Name/description of the activity
  2. **Status**: Current status of the activity (e.g., Planned, Completed, Not Started)
  3. **Contact**: Related contact for the activity (if applicable)
  4. **Due Date**: Scheduled due date for the activity
  5. **Assigned User**: User responsible for the activity
  6. **Row Actions**: Edit, View, Delete icons

- **Empty State**:
  - Displays "No results found." when no activities exist
  - Pagination shows: "<< < (0 - 0 of 0) > >>" (disabled)

**Example: Contacts Sub-panel:**

When clicking on "CONTACTS" in the Relationships section:

- **Panel Header**:
  - **Close Button**: 'X' icon on the left side to close/collapse the sub-panel
  - **Title**: "Contacts" with person icon
  - **Actions Dropdown**: Button on the right side with contact-related actions
    - **Create**: Redirects to the Create Contact page (new contact will be associated with this opportunity)
    - **Link / Unlink**: Opens modal/selector to link an existing contact or unlink currently associated contacts

- **Table Columns** (when records exist, all sortable):
  1. **Name**: Contact's full name (sortable, has sort icon)
  2. **Account Name**: Account the contact belongs to (e.g., "Kaos Trading Ltd")
  3. **Role**: Contact's role in relation to the opportunity (e.g., "Technical Decision Maker", "Business Evaluator", "Primary Decision Maker")
  4. **Email**: Contact's email address
  5. **Office Phone**: Contact's office phone number (sortable, has sort icon)
  6. **Row Actions**: 
     - **Pencil Icon**: Edit the individual contact record
     - **Link Icon**: Unlink the contact from this opportunity

- **Table Data Example**:
  - Jane Bevers | Kaos Trading Ltd | Technical Decision Maker | the99@example.co.uk | (752) 961-5566
  - Jesse Cowart | Kaos Trading Ltd | Business Evaluator | section.section@example.tv | (886) 974-2543
  - Tommie Crepeau | Kaos Trading Ltd | Primary Decision Maker | sugar31@example.co.uk | (532) 645-3959

- **Pagination**:
  - Shows "<< < (1 - 3 of 3) > >>" when 3 contacts are displayed
  - Indicates total count and current page range

**Similar sub-panels exist for other relationship types (Documents, Quotes, Projects, etc.) with their own table structures and Actions dropdown options specific to each entity type.**

#### Right Panel: Insights and Timeline

**Insights Section:**
- **Display**: Large number display (e.g., "3")
- **Metric**: "DAY(S) THIS OPPORTUNITY HAS BEEN AT THIS SALES STAGE"
- Shows duration metric indicating how long the opportunity has been in its current sales stage
- Updates automatically based on sales stage changes

**Timeline Section:**
- **Header**: "Timeline"
- **Content**: 
  - When no data: Displays "No Data" message
  - When data exists: Shows chronological list of events, activities, updates, and communications related to the opportunity
- **Format**: Likely displays activities, notes, calls, meetings, emails, and other interactions in chronological order
- May include filters or grouping options (to be confirmed)

### Page Features

**View and Edit Modes:**

- **View Mode** (Default):
  - All opportunity information displayed in read-only format
  - Fields show pencil icons indicating they can be edited
  - Header shows: "Edit", "Insights", "Actions" buttons
  - Clicking "Edit" button transitions to Edit Mode

- **Edit Mode** (Activated by clicking "Edit" button):
  - All fields become active, editable input controls
  - Header buttons change to: "Save", "Save And Continue", "Cancel", "Insights", "Actions"
  - **Save Button**: Saves all changes and returns to View Mode
  - **Save And Continue Button**: Saves all changes and remains in Edit Mode (allows making multiple edits)
  - **Cancel Button**: Discards all unsaved changes and returns to View Mode
  - Field controls become active:
    - Text inputs become editable
    - Dropdowns become selectable
    - Date fields show calendar pickers
    - Lookup fields show 'X' clear buttons and dropdown indicators
  - Required fields are marked (likely with asterisk or visual indicator)
  - Changes persist until Save or Cancel is clicked

**Navigation:**
- **Record Navigation**: Use `<` and `>` arrows to navigate between opportunity records without returning to list
- **Position Indicator**: Shows current record position (e.g., "1 of 118")
- **Favorite**: Star icon allows favoriting/unfavoriting opportunities

**Relationships:**
- **Collapse/Expand**: Relationships section can be expanded/collapsed via chevron icon
- **Relationship Grid**: When expanded, shows grid of related entities with counts
- **Relationship Sub-panels**: Clicking a relationship item (e.g., "ACTIVITIES: 1", "CONTACTS: 3") opens a sub-panel below the Relationships section displaying records for that relationship type
- Each sub-panel has its own Actions dropdown for creating/linking records specific to that relationship type

**Field Behavior:**
- **Lookup Fields**: Account Name and Assigned To are hyperlinked (red text) - clicking opens selector or navigates to record
- **Inline Editing**: Pencil icons indicate fields can be edited inline
- **Required vs Optional**: Some fields may be required, others optional (validation rules to be determined)

### Open Questions
1. ~~What are all the fields displayed in the Basic Attributes section?~~ [ANSWERED - See BASIC Tab fields above]
2. ~~What fields are included in the Other Attributes section?~~ [ANSWERED - See OTHER Tab fields above]
3. ~~What related records are shown in the Related Records section?~~ [ANSWERED - See Relationships Section above]
4. ~~How does edit mode work exactly - what happens when Edit button is clicked, are changes saved automatically or is there Save/Cancel?~~ [ANSWERED - Edit mode requires explicit Save/Save And Continue, Cancel discards changes]
5. What options are available in the "Actions" dropdown menu (Delete, Duplicate, etc.)?
6. ~~What is the structure and content of the Insights panel?~~ [ANSWERED - Shows days at current sales stage]
7. What activities/events are shown in the Timeline when data exists - what types of events are tracked?
8. Can users add new notes, activities, or comments directly from this page?
9. What validation rules apply when editing opportunity fields (required fields, data formats, etc.)?
10. What are all available options in dropdown fields (Sales Stage, Type, Lead Source)?
11. What happens when clicking on hyperlinked fields (Account Name, Assigned To) - does it navigate or open a selector?
12. Are there additional relationship types beyond the 9 shown (ACTIVITIES, HISTORY, DOCUMENTS, LEADS, PROJECTS, QUOTES, CONTACTS, CONTRACTS, SECURITY GROUPS)?
13. ~~What is the exact behavior when clicking on a relationship item - does it open a modal, navigate to filtered list, or something else?~~ [ANSWERED - Opens sub-panel below Relationships section with table of records]
14. Can the Relationships section be expanded by default, or is it always collapsed on page load?
15. What are the exact Actions dropdown options for each relationship type (Documents, Quotes, Projects, etc.)? (Contacts Actions dropdown documented: Create, Link/Unlink)
16. Can multiple relationship sub-panels be open simultaneously, or does opening one close the previous one?
17. What are the table column structures for each relationship sub-panel (Documents, Quotes, Projects, etc.)? (Contacts and Activities documented above)
18. What happens after creating a new contact from the Contacts sub-panel - does it automatically link to the opportunity, or is linking a separate step?
19. What are all possible Role values for contacts in an opportunity (Technical Decision Maker, Business Evaluator, Primary Decision Maker, etc.)?

---

## 7. Create Opportunity Page

### Context
- Accessed by clicking "Create Opportunity" from the Opportunities dropdown menu in the top navigation
- URL: `suite8demo.suiteondemand.com/#/opportunities/edit?return_module=Opportunities&return_action=DetailView`
- Purpose: Form for creating a new opportunity record
- Page title: "Create"

### Page Layout

**Page Header:**
- **Title**: "Create" displayed prominently on the left
- **Action Buttons** (top right):
  - **Save**: Submits the form and creates the opportunity
  - **Cancel**: Discards changes and returns to the previous page/list view

**Tabs:**
- **BASIC**: Default active tab (highlighted in purple when active)
- **OTHER**: Inactive tab containing metadata fields

### Field Requirements and Validation

**Required Fields Indicator:**
- Fields marked with asterisk (*) are **REQUIRED** fields
- Required fields must be filled before the form can be saved
- Visual indicator: Asterisk (*) displayed next to field label

**Required Fields on Create Form:**
- OPPORTUNITY NAME (*)
- OPPORTUNITY AMOUNT (*)
- SALES STAGE (*)
- ACCOUNT NAME (*)
- EXPECTED CLOSE DATE (*)

**Dropdown Fields:**
- All dropdown fields MUST have populated values/options available for selection
- Dropdown values should be pre-loaded from the system/database
- Examples:
  - SALES STAGE dropdown: Must contain list of available sales stages
  - TYPE dropdown: Must contain list of opportunity types
  - LEAD SOURCE dropdown: Must contain list of lead source options
  - ACCOUNT NAME lookup: Must show list of available accounts
  - CAMPAIGN lookup: Must show list of available campaigns
  - ASSIGNED TO lookup: Must show list of available users

### BASIC Tab Fields

Fields are organized in a two-column layout:

**Left Column:**

1. **OPPORTUNITY NAME**
   - **Type**: Text input field
   - **Required**: Yes (marked with asterisk *)
   - **Placeholder**: Empty
   - **Purpose**: Name/identifier for the opportunity

2. **OPPORTUNITY AMOUNT**
   - **Type**: Currency input with two components
   - **Components**:
     - Currency dropdown: Shows currency symbol/abbreviation (e.g., "$ (USD)")
     - Amount text input: Numeric input field for the amount
   - **Required**: Yes (marked with asterisk *)
   - **Purpose**: Monetary value of the opportunity

3. **SALES STAGE**
   - **Type**: Dropdown selector
   - **Required**: Yes (marked with asterisk *)
   - **Dropdown Values**: MUST be populated with available sales stage options (e.g., Prospecting, Qualification, Needs Analysis, Value Proposition, Identifying Decision Makers, Perception Analysis, Proposal/Price Quote, Negotiation/Review, Closed Won, Closed Lost)
   - **Placeholder**: Empty (shows selected value when chosen)
   - **Purpose**: Current stage of the opportunity in the sales pipeline

4. **PROBABILITY (%)**
   - **Type**: Text input field (numeric)
   - **Required**: No
   - **Placeholder**: Empty
   - **Purpose**: Win probability percentage

5. **NEXT STEP**
   - **Type**: Text input field
   - **Required**: No
   - **Placeholder**: Empty
   - **Purpose**: Next action to be taken for the opportunity

6. **DESCRIPTION**
   - **Type**: Multi-line text area (resizable)
   - **Required**: No
   - **Placeholder**: Empty
   - **UI**: Small triangle in bottom right corner indicates resizability
   - **Purpose**: Detailed description of the opportunity

**Right Column:**

1. **ACCOUNT NAME**
   - **Type**: Lookup field with dropdown
   - **Required**: Yes (marked with asterisk *)
   - **Dropdown Values**: MUST be populated with list of available accounts from the system
   - **Placeholder**: "Select an item"
   - **Controls**: 
     - 'X' icon to clear selection
     - Dropdown arrow to open selector (shows list of accounts)
   - **Purpose**: Associated account for the opportunity

2. **EXPECTED CLOSE DATE**
   - **Type**: Date input field with date picker
   - **Required**: Yes (marked with asterisk *)
   - **Placeholder**: "yyyy-mm-dd"
   - **Controls**: Calendar icon to open date picker
   - **Purpose**: Projected date for closing the opportunity

3. **TYPE**
   - **Type**: Dropdown selector
   - **Required**: No (no asterisk)
   - **Dropdown Values**: MUST be populated with available opportunity type options
   - **Placeholder**: Empty or "Select an item"
   - **Purpose**: Type/classification of the opportunity

4. **LEAD SOURCE**
   - **Type**: Dropdown selector
   - **Required**: No (no asterisk)
   - **Dropdown Values**: MUST be populated with available lead source options (e.g., Word of mouth, Web Site, Cold Call, Partner, Purchased List, Employee Referral, Self Generated, Trade Show, etc.)
   - **Placeholder**: Empty or "Select an item"
   - **Purpose**: Source of the lead that became the opportunity

5. **CAMPAIGN**
   - **Type**: Lookup field with dropdown
   - **Required**: No (no asterisk)
   - **Dropdown Values**: MUST be populated with list of available campaigns from the system (or "Select an item" if none available)
   - **Placeholder**: "Select an item"
   - **Controls**: 
     - 'X' icon to clear selection
     - Dropdown arrow to open selector (shows list of campaigns)
   - **Purpose**: Marketing campaign associated with the opportunity

**Bottom Section (Below Description Field):**

- **ASSIGNED TO**
  - **Type**: Lookup/dropdown field
  - **Required**: No (no asterisk, but may have default value)
  - **Dropdown Values**: MUST be populated with list of available users from the system
  - **Default Value**: May be pre-filled with current user (e.g., "WillWestin")
  - **Controls**: 
    - 'X' icon to clear selection
    - Dropdown arrow to open user selector (shows list of users)
  - **Purpose**: User responsible for the opportunity

### OTHER Tab Fields

When clicking on the "OTHER" tab:

- **DATE MODIFIED**
  - **Type**: Read-only input field
  - **State**: Empty (populated automatically upon save)
  - **Format**: Date and time (typically "yyyy-mm-dd HH:mm")
  - **Purpose**: Audit trail - shows when opportunity was last modified

- **DATE CREATED**
  - **Type**: Read-only input field
  - **State**: Empty (populated automatically upon save)
  - **Format**: Date and time (typically "yyyy-mm-dd HH:mm")
  - **Purpose**: Audit trail - shows when opportunity was created

### Form Behavior

**Save Action:**
- Validates required fields (marked with *)
- Creates the new opportunity record
- Auto-populates DATE CREATED and DATE MODIFIED
- Redirects to opportunity detail page or list view (based on return_action parameter)

**Cancel Action:**
- Discards all entered data
- Returns to previous page (likely Opportunities list view)

**Field Validation:**
- Required fields (marked with *) must be filled before Save is enabled
- Date format validation for Expected Close Date
- Numeric validation for Opportunity Amount and Probability (%)

### Open Questions
1. What are all available options in the "Sales Stage" dropdown?
2. What are all available options in the "TYPE" dropdown?
3. What are all available options in the "LEAD SOURCE" dropdown?
4. What are the exact validation rules and error messages for required fields?
5. What happens if user clicks Save with required fields empty - inline errors, modal, etc.?
6. Does the Account Name lookup support autocomplete/search, or only dropdown selection?
7. What is the default currency if user doesn't change it from "$ (USD)"?
8. Are there any other fields in the OTHER tab beyond DATE MODIFIED and DATE CREATED?
9. What is the exact redirect behavior after Save - does it go to detail view of created opportunity or back to list?
10. Is there any auto-save or draft functionality?
11. What are the default values for optional fields (if any)?

---

## 8. Import Opportunities Page

### Context
- Accessed by clicking "Import Opportunities" from the Opportunities dropdown menu in the top navigation
- Purpose: Bulk import multiple opportunities from a file
- Multi-step import process (Step 1: Upload Import File)

### Page Layout

**Page Header:**
- **Title**: "Step 1: Upload Import File"
- Indicates this is the first step in a multi-step import process

**Instructions Section:**
- **Text**: "Select a file on your computer that contains the data that you would like to import, or download the template to get a head start on creating the import file."
- Provides guidance on how to use the import functionality

### Import Template Download

**Download Import File Template:**
- **Link**: "Download Import File Template" with an info icon (ℹ️)
- **Behavior**: Clicking this link downloads a template file
- **Purpose**: Provides a pre-formatted template file that users can fill with opportunity data
- **Template Format**: Likely CSV or Excel format (to be confirmed)
- **Template Content**: Contains column headers matching opportunity fields (Name, Amount, Sales Stage, Account Name, etc.)

### File Selection

**File Upload Section:**
- **Choose File Button**: Standard file browser button
- **File Input**: Text input showing "No file chosen" when no file is selected
- **File Selection**: After clicking "Choose File", user can browse and select a file from their computer
- **File Validation**: 
  - Validation message displayed: "This can only be alphanumeric characters, plus ',', '`' and '_'"
  - Indicates filename restrictions (alphanumeric plus comma, backtick, underscore)
  - File must meet naming requirements before upload

### Import Behavior Options

**Radio Button Options:**
Two import behavior options are available (mutually exclusive):

1. **Create new records only** (Default Selected)
   - **Description**: Only creates new opportunity records
   - **Behavior**: Does not update existing records, only adds new ones
   - **Info Icon**: (ℹ️) Provides additional information about this option
   - **Use Case**: When importing entirely new opportunities

2. **Create new records and update existing records**
   - **Description**: Creates new records and updates existing ones
   - **Behavior**: 
     - Creates new opportunities for records not in system
     - Updates existing opportunities if they match (likely by name or ID)
   - **Info Icon**: (ℹ️) Provides additional information about this option
   - **Use Case**: When importing a mix of new and existing opportunities

### Navigation

**Action Buttons:**
- **Next > Button**: Proceeds to the next step of the import process
  - Only enabled when a valid file is selected
  - Validates file before allowing progression

### Import Process Flow

**Step 1: Upload Import File**
- User downloads template (optional)
- User selects/upload file
- User chooses import behavior
- User clicks "Next >" to proceed to Step 2

**Step 2: Confirm Import File Properties** (Documented below)
- System processes uploaded file
- Displays data preview table
- User confirms/modifies import properties
- User selects data source (if applicable)
- User clicks "Next >" to proceed to Step 3

**Subsequent Steps** (To be documented):
- Step 3: Likely field mapping or import execution
- Step 4: Likely import results/summary

---

### Step 2: Confirm Import File Properties

### Context
- Displayed after clicking "Next >" in Step 1
- URL: `suite8demo.suiteondemand.com/#/import/step1?import_module=Opportunities&return_module=Opportunities&return_action=index`
- Purpose: Preview imported data and confirm/modify import file properties

### Page Layout

**Page Header:**
- **Title**: "Step 2: Confirm Import File Properties"
- Indicates this is the second step in the multi-step import process

**Instructions:**
- **Text**: "Here is how the first several rows of the import file appear with the detected file properties. If a header row was detected, it is displayed in the top row of the table. View the import file properties to make changes to the detected properties and to set additional properties. Updating the settings will update the data appearing in the table."
- Explains the purpose of the preview and how to modify properties

### Data Preview Table

**Table Structure:**
- Displays a preview of the imported data from the uploaded file
- Shows first several rows of data
- **Header Row**: If detected, column headers are displayed in the top row
- **Horizontal Scrollbar**: Present when table has many columns (allows scrolling to see all columns)

**Table Columns** (Detected from import file):
The table displays all columns from the imported file, including:
- Opportunity Name
- ID
- Opportunity Amount
- Currency
- Expected Close Date
- Sales Stage
- Probability (%)
- Next Step
- Type
- Account Name
- Description
- Amount
- Lead Source
- campaign_id
- Assigned to
- Assigned User
- Date Created
- Date Modified
- Created By
- Modified By
- Deleted
- Longit (Longitude, partially visible)
- Additional columns may be visible via horizontal scroll

**Table Data:**
- Each row represents an opportunity record from the import file
- Data is displayed as it appears in the file
- Example rows show opportunity details (Name, Amount, Sales Stage, Account, etc.)
- Data preview helps users verify the import file is correct before proceeding

**Table Features:**
- Scrollable horizontally to view all columns
- Shows actual data values from the import file
- Helps identify data quality issues or misalignments

### View Import File Properties

**Button:**
- **Label**: "View Import File Properties"
- **Location**: Below the data preview table
- **Icon**: Information icon (ℹ️) next to the button
- **Purpose**: Opens a modal or panel to view and modify detected import file properties
- **Properties That Can Be Modified** (likely includes):
  - File encoding (UTF-8, ASCII, etc.)
  - Delimiter (comma, semicolon, tab, etc.)
  - Text qualifier (quotes, etc.)
  - Header row detection
  - Date format
  - Other file parsing settings

### Source Selection Section

**Heading**: "If the import file data was exported from any of the following sources, select which one."

**Radio Button Options** (mutually exclusive):
1. **None** (Default Selected)
   - Standard import file format
   - No special source-specific handling required

2. **Salesforce.com**
   - Indicates file was exported from Salesforce.com
   - May apply source-specific transformations or mappings

3. **Microsoft Outlook**
   - Indicates file was exported from Microsoft Outlook
   - May apply source-specific transformations or mappings

**Info Icons**: Information icons (ℹ️) next to the heading and "Microsoft Outlook" option provide additional details

**Purpose**: Helps the system apply appropriate transformations or mappings based on the source system

### Navigation Buttons

**Bottom Navigation:**
- **< Back Button** (Left): Returns to Step 1 (Upload Import File)
  - Allows user to go back and select a different file or change import behavior
- **Next > Button** (Right): Proceeds to Step 3 of the import process
  - Only enabled when file properties are confirmed
  - Validates data before allowing progression

### Step 2 Behavior

**File Processing:**
- System automatically detects file properties (delimiter, encoding, header row, etc.)
- Parses the file and displays preview
- User can modify properties if detection is incorrect

**Data Validation:**
- Preview helps identify data issues before import
- User can verify column mappings are correct
- User can check data quality and format

**Property Modification:**
- Clicking "View Import File Properties" allows adjusting parsing settings
- Changes to properties update the data preview table
- User can iterate until preview looks correct

---

### Step 3: Confirm Field Mappings

### Context
- Displayed after clicking "Next >" in Step 2
- URL: `suite8demo.suiteondemand.com/#/import/step1?import_module=Opportunities&return_module=Opportunities&return_action=index`
- Purpose: Map columns from the import file to module fields in the system

### Page Layout

**Page Header:**
- **Title**: "Step 3: Confirm Field Mappings"
- Indicates this is the third step in the multi-step import process

**Instructions:**
- **Text**: "The table below contains all of the fields in the module that can be mapped to the data in the import file. If the file contains a header row, the columns in the file have been mapped to matching fields. Check the mappings to make sure that they are what you expect, and make changes, as necessary. To help you check the mappings, Row 1 displays the data in the file. Be sure to map to all of the required fields (noted by an asterisk)."
- Explains the purpose of field mapping and importance of required fields

### Field Mapping Table

**Table Structure:**
Three-column table for mapping import file columns to module fields:

1. **Header Row Column** (Left Column)
   - **Label**: "Header Row" with information icon (ℹ️)
   - **Content**: Lists the field names as they appear in the imported file (column headers)
   - **Examples**: Opportunity Name, ID, Opportunity Amount, Currency, Expected Close Date, Sales Stage, Probability (%), Next Step, Type, Account Name, Description, Amount, Lead Source, campaign_id, Assigned to, Assigned User, Date Created, Date Modified, Created By, Modified By, Deleted, Longitude, Latitude, Geocode Status, Address
   - **Purpose**: Shows what columns are available in the import file

2. **Module Field Column** (Middle Column)
   - **Label**: "Module Field" with information icon (ℹ️)
   - **Content**: Dropdown selectors for each row
   - **Default Behavior**: System automatically maps file columns to matching module field names (if header row detected)
   - **Required Fields**: Marked with asterisk (*)
     - Opportunity Name *
     - Opportunity Amount *
     - Expected Close Date *
     - Sales Stage *
     - Account Name *
   - **Dropdown Options**: Each dropdown contains list of available module fields that can be mapped
   - **User Action**: User can change the mapping by selecting a different module field from the dropdown
   - **Purpose**: Allows user to specify which module field each import file column should map to

3. **Row 1 Column** (Right Column)
   - **Label**: "Row 1" with information icon (ℹ️)
   - **Content**: Displays actual data from the first row of the imported file for each mapped field
   - **Purpose**: Helps user verify the mapping is correct by showing sample data
   - **Example Data**:
     - Opportunity Name: "24/7 Couriers - 1000 units"
     - ID: "a81fb852-f733-457e-8e77-467324fa9812"
     - Opportunity Amount: "$10,000.00"
     - Currency: "'-99" (or "'99")
     - Expected Close Date: "2022-12-18"
     - Sales Stage: "Closed Won"
     - Probability (%): "100"
     - Next Step: (empty)
     - Type: "New Business"
     - Account Name: "24/7 Couriers"
     - Description: (empty)
     - Amount: "$10,000.00"
     - Lead Source: "Direct Mail"
     - campaign_id: (value from file)
     - Assigned to: "sarah"
     - Assigned User: "seed_sarah_id"
     - Date Created: "2023-10-11 15:15"
     - Date Modified: "2025-12-12 18:00"
     - Created By: "1"
     - Modified By: "1"
     - Deleted: "0"
     - Longitude: (value from file)
     - Latitude: (value from file)
     - Geocode Status: (value from file)
     - Address: (value from file)

**Table Features:**
- **Vertical Scrollbar**: Present when there are many fields to map
- **Required Field Indicator**: Asterisk (*) next to required field names
- **Automatic Mapping**: System attempts to auto-map based on matching field names
- **Manual Override**: User can change any mapping via dropdown selection

### Default Value Button

**Button:**
- **Label**: "< Default Value" with information icon (ℹ️)
- **Location**: To the right of the "Row 1" column
- **Purpose**: Allows setting default values for fields that are not mapped or have empty values
- **Behavior**: Clicking opens options to set default values for unmapped fields

### Add Field Button

**Button:**
- **Label**: "Add Field" with information icon (ℹ️)
- **Location**: Bottom left of the field mapping table
- **Purpose**: Allows adding additional fields to the mapping table
- **Behavior**: Clicking adds a new row to the mapping table for mapping additional fields

### Navigation Buttons

**Bottom Navigation:**
- **< Back Button** (Left): Returns to Step 2 (Confirm Import File Properties)
  - Allows user to go back and modify file properties or source selection
- **Next > Button** (Right): Proceeds to Step 4 (final step - Import execution/results)
  - Only enabled when all required fields (*) are mapped
  - Validates that required field mappings are complete before allowing progression

### Step 3 Behavior

**Automatic Mapping:**
- If import file contains header row, system automatically maps columns to matching module field names
- User should verify all automatic mappings are correct

**Required Field Validation:**
- All required fields (marked with *) MUST be mapped before proceeding
- System prevents progression if required fields are not mapped
- User must ensure all required fields have valid mappings

**Mapping Verification:**
- Row 1 data preview helps user verify mappings are correct
- User can see actual data values to confirm correct field mapping
- User can adjust mappings using dropdown selectors

**Field Selection:**
- Each Module Field dropdown contains all available opportunity module fields
- User can map any import file column to any module field
- Multiple import columns can map to the same module field (if needed)

### Open Questions
1. What file formats are supported for import (CSV, Excel, TSV, etc.)?
2. What is the exact format of the downloaded template file (CSV, Excel, etc.)?
3. What are the column headers/fields included in the template?
4. What is the maximum file size allowed for import?
5. How does the system match existing records when "Create new records and update existing records" is selected (by Name, ID, etc.)?
6. ~~What happens in Step 2 of the import process (field mapping, data preview, etc.)?~~ [ANSWERED - Step 2 shows data preview, import properties, and source selection]
7. What validation is performed on the uploaded file before allowing "Next >"?
8. What error messages are shown for invalid files or filenames?
9. Are there any restrictions on the number of records that can be imported in a single file?
10. What happens if the file contains duplicate records?
11. What are the exact filename validation rules (alphanumeric plus ',', '`', '_')?
12. Can users cancel the import process at any step?
13. What are all the properties that can be modified in "View Import File Properties"?
14. What transformations are applied when selecting "Salesforce.com" or "Microsoft Outlook" as the source?
15. ~~What happens in Step 3 of the import process?~~ [ANSWERED - Step 3 shows field mapping table with Header Row, Module Field dropdowns, and Row 1 preview]
16. How many rows are displayed in the data preview table (first 10, 20, all, etc.)?
17. What happens if the system incorrectly detects file properties (delimiter, encoding, etc.)?
18. ~~What happens in Step 4 of the import process (import execution and results)?~~ [ANSWERED - Step 4 is duplicate check configuration, Import Now executes import]
19. What are all available module fields that can be mapped in the Module Field dropdowns?
20. Can users map multiple import file columns to the same module field?
21. What happens if a required field is not mapped - what error message is shown?
22. How does the "< Default Value" button work - what options are available?
23. What happens when clicking "Add Field" - how does it add new mapping rows?
24. Can users remove/unmap fields from the mapping table?
25. What happens if import file has columns that don't match any module fields?

---

### Step 4: Check For Possible Duplicates

### Context
- Displayed after clicking "Next >" in Step 3
- URL: `suite8demo.suiteondemand.com/#/import/step1?import_module=Opportunities&return_module=Opportunities&return_action=index`
- Purpose: Configure duplicate checking to avoid creating duplicate opportunity records during import

### Page Layout

**Page Header:**
- **Title**: "Step 4: Check For Possible Duplicates"
- Indicates this is the fourth and final step before import execution

**Instructions:**
- **Text**: "To avoid creating duplicate records, select which of the mapped fields you would like to use to perform a duplicate check while data is being imported. Values within existing records in the selected fields will be checked against the data in the import file. If matching data is found, the rows in the import file containing the data will be displayed along with the import results (next page). You will then be able to select which of these rows to continue importing."
- Explains the duplicate check process and how duplicates are handled

### Duplicate Check Configuration

**Two-Column Layout:**

1. **Fields to Check Box** (Left Column)
   - **Label**: "Fields to Check" at the top
   - **Type**: List box (white background)
   - **Content**: Fields selected for duplicate checking (initially empty)
   - **Horizontal Scrollbar**: Present when content exceeds visible width
   - **Purpose**: Displays fields that will be used to check for duplicates
   - **Behavior**: 
     - Fields can be dragged from "Available Fields" box
     - Fields can be removed (likely by dragging back or using remove action)

2. **Available Fields Box** (Right Column)
   - **Label**: "Available Fields" at the top
   - **Type**: List box (white background)
   - **Content**: Fields available for duplicate checking
   - **Examples**: "Assigned User", "Opportunity Name"
   - **Horizontal Scrollbar**: Present when content exceeds visible width
   - **Purpose**: Lists all mapped fields that can be used for duplicate checking
   - **Behavior**: 
     - Fields are draggable
     - Can be dragged to "Fields to Check" box

**Drag and Drop Functionality:**
- **Drag Source**: Fields in "Available Fields" box are **draggable**
- **Drop Target**: "Fields to Check" box accepts dragged fields
- **Behavior**: 
  - User drags fields from "Available Fields" to "Fields to Check" to select which fields to use for duplicate checking
  - Drag and drop is the primary method for moving fields between boxes
- **Multiple Fields**: User can select multiple fields for duplicate checking by dragging multiple fields
- **Field Removal**: Fields can likely be removed from "Fields to Check" (by dragging back to "Available Fields" or using remove action)

### Saved Import Settings

**Section:**
- **Text**: "To save the import settings, provide a name for the saved settings:"
- **Input Field**: Text input field (currently empty) for entering a name
- **Info Icon**: Small blue information icon (i) next to the input field
- **Purpose**: Allows saving current import configuration (file properties, field mappings, duplicate check settings) for future use
- **Behavior**: 
  - Optional - user can skip this if not saving settings
  - If name provided, settings are saved for reuse
  - Saved settings can likely be loaded in future imports

### Navigation Buttons

**Bottom Navigation:**
- **< Back Button** (Left, Grey): Returns to Step 3 (Confirm Field Mappings)
  - Allows user to go back and modify field mappings
- **Import Now Button** (Right, Blue/Primary): Executes the import process
  - Final action button that starts the import
  - Triggers the duplicate check and import execution
  - Proceeds to import results page (next page)

### Step 4 Behavior

**Duplicate Check Process:**
- When "Import Now" is clicked, system performs duplicate check using selected fields
- System compares values in selected "Fields to Check" against existing opportunity records
- If matches found, duplicate rows are identified and flagged

**Duplicate Handling:**
- Matching rows from import file are displayed along with import results
- User can then select which duplicate rows to continue importing
- User can skip duplicates or import them anyway

**Field Selection for Duplicate Check:**
- User selects which mapped fields to use for duplicate checking
- Common fields used: Opportunity Name, Account Name, etc.
- Multiple fields can be selected for more comprehensive duplicate checking
- Selected fields are checked against existing records during import

**Import Execution:**
- "Import Now" button triggers the actual import process
- System processes all rows in the import file
- Applies field mappings
- Performs duplicate checks on selected fields
- Creates new records or updates existing records based on Step 1 import behavior selection
- Generates import results/summary

### Import Process Complete Flow

**Step 1**: Upload Import File → Select file, choose import behavior → Click "Next >"
**Step 2**: Confirm Import File Properties → Review data preview, modify properties, select source → Click "Next >"
**Step 3**: Confirm Field Mappings → Map import columns to module fields, verify mappings → Click "Next >"
**Step 4**: Check For Possible Duplicates → Select fields for duplicate check, optionally save settings → Click "Import Now"
**Step 5**: View Import Results → Review import summary, view created records, handle duplicates/errors → Click action buttons

### Additional Questions for Step 4
26. ~~What does the import results page display (summary, created count, updated count, error list, etc.)?~~ [ANSWERED - Step 5 shows summary, created records table, action buttons, filter links]
27. How are duplicates displayed on the import results page?
28. What actions can users take on duplicate rows (skip, import anyway, merge, etc.)?
29. Can fields be removed from "Fields to Check" once added (drag back, remove button, etc.)?
30. What happens if no fields are selected in "Fields to Check" - is duplicate checking skipped?
31. How are saved import settings accessed and used in future imports?
32. What happens if duplicate check finds matches - does import pause or continue?
33. What information is shown for each duplicate match (existing record details, import row data, etc.)?
34. Can users cancel the import after clicking "Import Now"?
35. What validation is performed before "Import Now" is enabled (must have fields selected, etc.)?

---

### Step 5: View Import Results

### Context
- Displayed after clicking "Import Now" in Step 4
- URL: `suite8demo.suiteondemand.com/#/import/Last?current_step=4&type=&import_module=Opportunities&has_header=on`
- Purpose: Display results of the import operation, show created records, duplicates, and errors

### Page Layout

**Page Header:**
- **Title**: "Step 5: View Import Results"
- Indicates this is the final step showing the import operation results

### Summary Section

**Summary Display:**
- **Heading**: "Summary"
- **Content**: Displays import operation statistics
  - **Records Created**: Shows count of successfully created records (e.g., "1 records were created")
  - **Errors**: Shows count of rows that failed to import (e.g., "5 rows were not imported due to error")
  - **Additional Statistics**: May show other counts (duplicates found, records updated, etc.)

**Action Buttons** (Grey buttons, horizontally aligned):

1. **Undo Import**
   - **Functionality**: Reverses/undoes the import operation
   - **Behavior**: 
     - Deletes all records that were created during this import operation
     - Restores the system to the state before the import
     - Confirmation dialog likely required before executing undo
   - **Use Case**: When user wants to reverse the import and remove all created records

2. **Import Again**
   - **Functionality**: Restarts the import process from the beginning
   - **Behavior**: 
     - Returns to Step 1 (Upload Import File)
     - Allows user to import the same file again or select a different file
     - Previous import settings may be retained or reset
   - **Use Case**: When user wants to re-run the import with same or different file

3. **Exit**
   - **Functionality**: Exits/closes the import process
   - **Behavior**: 
     - Closes the import results page
     - Navigates to Opportunities list view (`/opportunities/index`)
     - Does NOT undo the import - created records remain in the system
     - Import results are saved
   - **Navigation**: Redirects user to the main Opportunities list view page
   - **Use Case**: When user is done reviewing results and wants to return to the Opportunities list view

### Record Categories

**Filter Links** (Displayed in red text, vertically listed):
- **Created Records**: Link to view/filter only successfully created records
- **Duplicates**: Link to view/filter duplicate records that were found during import
- **Errors**: Link to view/filter rows that failed to import with error details

**Behavior**: Clicking these links filters or navigates to show specific subsets of import results

### Opportunities Data Table

**Table Header:**
- **Title**: "Opportunities"
- Displays imported opportunity records

**Table Structure:**
- **Columns** (all sortable with sort arrows):
  1. **Name**: Opportunity name
  2. **Account Name**: Associated account
  3. **Sales Stage**: Current sales stage
  4. **Amount**: Opportunity amount
  5. **Close**: Expected close date
  6. **User**: Assigned user
  7. **Date Created**: Creation timestamp

**Table Features:**
- **Sortable Columns**: All column headers have sort arrows (up/down)
- **Pagination**: 
  - Controls at top and bottom: "<<", "<", "(X-Y of Z)", ">", ">>"
  - Shows range of displayed records and total count
  - Example: "(0-0 of 0)" when no records displayed

**Table Content:**
- **When Records Exist**: Displays imported opportunity records in table rows
- **When No Records**: Displays "No Data" message
- Shows records from the import file that were successfully imported

### Step 5 Behavior

**Import Execution:**
- System processes the import file based on configurations from Steps 1-4
- Applies field mappings
- Performs duplicate checks on selected fields
- Creates new records or updates existing records based on import behavior selection
- Validates data and handles errors
- Generates import results summary

**Results Display:**
- Summary shows counts of successful imports, errors, duplicates
- Table displays successfully imported records
- User can view created records, duplicates, and errors separately via filter links

**Error Handling:**
- Rows with errors are not imported
- Error count shown in summary
- "Errors" link provides details on failed rows

**Duplicate Handling:**
- Duplicates found during import are identified
- "Duplicates" link shows duplicate records
- User can review and decide on duplicate handling

**Record Navigation:**
- Clicking on opportunity records in table likely opens opportunity detail page
- Table supports sorting and pagination for reviewing imported records

### Import Process Complete

**Full Import Flow:**
1. **Step 1**: Upload Import File → Select file, choose import behavior → Click "Next >"
2. **Step 2**: Confirm Import File Properties → Review data preview, modify properties → Click "Next >"
3. **Step 3**: Confirm Field Mappings → Map columns to module fields → Click "Next >"
4. **Step 4**: Check For Possible Duplicates → Select duplicate check fields → Click "Import Now"
5. **Step 5**: View Import Results → Review summary, view created records, handle duplicates/errors → Click action buttons

**Import Completion:**
- Import is complete when Step 5 is displayed
- User can review results and take actions (Undo, Import Again, Exit)
- Imported records are available in the Opportunities module

### Additional Questions for Step 5
36. What details are shown when clicking "Created Records" link?
37. What details are shown when clicking "Duplicates" link?
38. What details are shown when clicking "Errors" link?
39. What confirmation is required when clicking "Undo Import"?
40. What happens when "Undo Import" is executed - are all records deleted or just from this import?
41. Can users export the import results?
42. What error messages/details are shown for failed rows?
43. Can users retry importing failed rows?
44. How are duplicate records displayed and can users import them?
45. What happens when clicking on an opportunity record in the results table?

